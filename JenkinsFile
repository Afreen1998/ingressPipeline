node {  
    stage('checkout') { 
        checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/Afreen1998/ingressPipeline']]])
    }
    stage('Deploy') {
            sh '''
            export IBMCLOUD_API_KEY=jRXN6KsKjnlAIhZXMgheLKadTZNLUhrgrHCGx6Ox2Tyh
            ibmcloud login -a cloud.ibm.com -r us-south -g Default
            ibmcloud ks cluster-config --cluster afKatageCluster
            kubectl apply -f ingressResource.yml
            '''
    }
}
